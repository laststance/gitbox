---

description: "機能実装のためのタスクリストテンプレート"
---

# タスク: [機能名]

**入力**: `/specs/[###-feature-name]/` からの設計ドキュメント
**前提条件**: plan.md（必須）、spec.md（ユーザーストーリーに必須）、research.md、data-model.md、contracts/

**テスト**: 以下の例にはテストタスクが含まれています。テストはオプションです - 機能仕様で明示的に要求された場合のみ含めてください。

**構成**: タスクは各ストーリーの独立した実装とテストを可能にするため、ユーザーストーリーごとにグループ化されています。

## フォーマット: `[ID] [P?] [Story] 説明`

- **[P]**: 並列実行可能（異なるファイル、依存関係なし）
- **[Story]**: このタスクが属するユーザーストーリー（例: US1、US2、US3）
- 説明に正確なファイルパスを含めてください

## パス規約

- **単一プロジェクト**: リポジトリルートの `src/`、`tests/`
- **Web アプリ**: `backend/src/`、`frontend/src/`
- **Mobile**: `api/src/`、`ios/src/` または `android/src/`
- 以下に示すパスは単一プロジェクトを想定 - plan.md の構造に基づいて調整してください

<!--
  ============================================================================
  重要: 以下のタスクは説明目的のサンプルタスクです。

  /speckit.tasks コマンドは、以下に基づいて実際のタスクに置き換える必要があります:
  - spec.md からのユーザーストーリー（優先度 P1、P2、P3...を含む）
  - plan.md からの機能要件
  - data-model.md からのエンティティ
  - contracts/ からのエンドポイント

  各ストーリーが以下を可能にするため、タスクはユーザーストーリーごとに構成されている必要があります:
  - 独立して実装可能
  - 独立してテスト可能
  - MVP インクリメントとして提供可能

  生成された tasks.md ファイルにこれらのサンプルタスクを残さないでください。
  ============================================================================
-->

## Phase 1: セットアップ（共有インフラストラクチャ）

**目的**: プロジェクトの初期化と基本構造

- [ ] T001 実装計画に従ってプロジェクト構造を作成
- [ ] T002 [言語] プロジェクトを [フレームワーク] 依存関係で初期化
- [ ] T003 [P] リンティングとフォーマットツールを設定

---

## Phase 2: 基盤（ブロッキング前提条件）

**目的**: すべてのユーザーストーリーを実装する前に完了しなければならないコアインフラストラクチャ

**⚠️ クリティカル**: このフェーズが完了するまでユーザーストーリーの作業を開始できません

基盤タスクの例（プロジェクトに基づいて調整）:

- [ ] T004 データベーススキーマとマイグレーションフレームワークをセットアップ
- [ ] T005 [P] 認証/認可フレームワークを実装
- [ ] T006 [P] API ルーティングとミドルウェア構造をセットアップ
- [ ] T007 すべてのストーリーが依存する基本モデル/エンティティを作成
- [ ] T008 エラーハンドリングとロギングインフラストラクチャを設定
- [ ] T009 環境設定管理をセットアップ

**チェックポイント**: 基盤準備完了 - ユーザーストーリー実装を並列で開始可能

---

## Phase 3: ユーザーストーリー 1 - [タイトル] (優先度: P1) 🎯 MVP

**目標**: [このストーリーが提供するものの簡潔な説明]

**独立テスト**: [このストーリーが単独で動作することを検証する方法]

### ユーザーストーリー 1 のテスト（オプション - テストが要求された場合のみ）⚠️

> **注記: これらのテストを最初に記述し、実装前に失敗することを確認してください**

- [ ] T010 [P] [US1] tests/contract/test_[name].py の [endpoint] のコントラクトテスト
- [ ] T011 [P] [US1] tests/integration/test_[name].py の [user journey] の統合テスト

### ユーザーストーリー 1 の実装

- [ ] T012 [P] [US1] src/models/[entity1].py に [Entity1] モデルを作成
- [ ] T013 [P] [US1] src/models/[entity2].py に [Entity2] モデルを作成
- [ ] T014 [US1] src/services/[service].py に [Service] を実装（T012、T013 に依存）
- [ ] T015 [US1] src/[location]/[file].py に [endpoint/feature] を実装
- [ ] T016 [US1] 検証とエラーハンドリングを追加
- [ ] T017 [US1] ユーザーストーリー 1 の操作のロギングを追加

**チェックポイント**: この時点で、ユーザーストーリー 1 は完全に機能し、独立してテスト可能であるべきです

---

## Phase 4: ユーザーストーリー 2 - [タイトル] (優先度: P2)

**目標**: [このストーリーが提供するものの簡潔な説明]

**独立テスト**: [このストーリーが単独で動作することを検証する方法]

### ユーザーストーリー 2 のテスト（オプション - テストが要求された場合のみ）⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].py の [endpoint] のコントラクトテスト
- [ ] T019 [P] [US2] tests/integration/test_[name].py の [user journey] の統合テスト

### ユーザーストーリー 2 の実装

- [ ] T020 [P] [US2] src/models/[entity].py に [Entity] モデルを作成
- [ ] T021 [US2] src/services/[service].py に [Service] を実装
- [ ] T022 [US2] src/[location]/[file].py に [endpoint/feature] を実装
- [ ] T023 [US2] ユーザーストーリー 1 コンポーネントと統合（必要な場合）

**チェックポイント**: この時点で、ユーザーストーリー 1 と 2 の両方が独立して動作するべきです

---

## Phase 5: ユーザーストーリー 3 - [タイトル] (優先度: P3)

**目標**: [このストーリーが提供するものの簡潔な説明]

**独立テスト**: [このストーリーが単独で動作することを検証する方法]

### ユーザーストーリー 3 のテスト（オプション - テストが要求された場合のみ）⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].py の [endpoint] のコントラクトテスト
- [ ] T025 [P] [US3] tests/integration/test_[name].py の [user journey] の統合テスト

### ユーザーストーリー 3 の実装

- [ ] T026 [P] [US3] src/models/[entity].py に [Entity] モデルを作成
- [ ] T027 [US3] src/services/[service].py に [Service] を実装
- [ ] T028 [US3] src/[location]/[file].py に [endpoint/feature] を実装

**チェックポイント**: すべてのユーザーストーリーが独立して機能するようになっているべきです

---

[必要に応じて、同じパターンに従ってユーザーストーリーフェーズを追加]

---

## Phase N: 洗練と横断的関心事

**目的**: 複数のユーザーストーリーに影響する改善

- [ ] TXXX [P] docs/ のドキュメント更新
- [ ] TXXX コードのクリーンアップとリファクタリング
- [ ] TXXX すべてのストーリーにわたるパフォーマンス最適化
- [ ] TXXX [P] tests/unit/ の追加ユニットテスト（要求された場合）
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.md の検証を実行

## Phase N+1: Constitution 準拠検証

**目的**: デプロイ前にすべての constitution 要件が満たされていることを確認

- [ ] TXXX [P] Playwright によるブラウザ検証（スクリーンショット取得済み）
- [ ] TXXX [P] すべてのクリティカルフローの E2E テストが合格
- [ ] TXXX [P] すべてのコンポーネントに明確な docstring がある
- [ ] TXXX [P] WCAG AA コントラスト検証（すべての12テーマ）
- [ ] TXXX [P] セキュリティ要件の検証（2FA、監査ログ、暗号化）
- [ ] TXXX [P] ユーザー設定ガイドの完成（Vercel/Supabase セットアップ）
- [ ] TXXX パフォーマンスベンチマークの達成（100+ repos、<100ms drag など）
- [ ] TXXX 国際化の検証（英語/日本語）
- [ ] TXXX [P] 日本語ファーストの検証（すべてのドキュメント、コメント、コミットが日本語）

---

## 依存関係と実行順序

### フェーズ依存関係

- **セットアップ（Phase 1）**: 依存関係なし - 即座に開始可能
- **基盤（Phase 2）**: セットアップ完了に依存 - すべてのユーザーストーリーをブロック
- **ユーザーストーリー（Phase 3+）**: すべて基盤フェーズの完了に依存
  - その後、ユーザーストーリーは並列で進行可能（スタッフが配置されている場合）
  - または優先度順に順次実行（P1 → P2 → P3）
- **洗練（最終フェーズ）**: 望ましいすべてのユーザーストーリーの完了に依存

### ユーザーストーリー依存関係

- **ユーザーストーリー 1（P1）**: 基盤（Phase 2）後に開始可能 - 他のストーリーへの依存関係なし
- **ユーザーストーリー 2（P2）**: 基盤（Phase 2）後に開始可能 - US1 と統合される可能性があるが、独立してテスト可能であるべき
- **ユーザーストーリー 3（P3）**: 基盤（Phase 2）後に開始可能 - US1/US2 と統合される可能性があるが、独立してテスト可能であるべき

### 各ユーザーストーリー内

- テスト（含まれる場合）は、実装前に記述され、失敗しなければならない
- サービスの前にモデル
- エンドポイントの前にサービス
- 統合の前にコア実装
- 次の優先度に進む前にストーリーを完了

### 並列実行の機会

- [P] マークされたすべてのセットアップタスクは並列実行可能
- [P] マークされたすべての基盤タスクは並列実行可能（Phase 2 内）
- 基盤フェーズが完了すると、すべてのユーザーストーリーを並列開始可能（チームキャパシティが許せば）
- [P] マークされたユーザーストーリーのすべてのテストは並列実行可能
- ストーリー内の [P] マークされたモデルは並列実行可能
- 異なるチームメンバーによって異なるユーザーストーリーを並列作業可能

---

## 並列実行の例: ユーザーストーリー 1

```bash
# ユーザーストーリー 1 のすべてのテストを一緒に起動（テストが要求された場合）:
Task: "tests/contract/test_[name].py の [endpoint] のコントラクトテスト"
Task: "tests/integration/test_[name].py の [user journey] の統合テスト"

# ユーザーストーリー 1 のすべてのモデルを一緒に起動:
Task: "src/models/[entity1].py に [Entity1] モデルを作成"
Task: "src/models/[entity2].py に [Entity2] モデルを作成"
```

---

## 実装戦略

### MVP ファースト（ユーザーストーリー 1 のみ）

1. Phase 1 完了: セットアップ
2. Phase 2 完了: 基盤（クリティカル - すべてのストーリーをブロック）
3. Phase 3 完了: ユーザーストーリー 1
4. **停止して検証**: ユーザーストーリー 1 を独立してテスト
5. 準備ができていればデプロイ/デモ

### インクリメンタル デリバリー

1. セットアップ + 基盤を完了 → 基盤準備完了
2. ユーザーストーリー 1 を追加 → 独立してテスト → デプロイ/デモ（MVP!）
3. ユーザーストーリー 2 を追加 → 独立してテスト → デプロイ/デモ
4. ユーザーストーリー 3 を追加 → 独立してテスト → デプロイ/デモ
5. 各ストーリーは以前のストーリーを壊すことなく価値を追加

### 並列チーム戦略

複数の開発者の場合:

1. チームが一緒にセットアップ + 基盤を完了
2. 基盤が完了したら:
   - 開発者 A: ユーザーストーリー 1
   - 開発者 B: ユーザーストーリー 2
   - 開発者 C: ユーザーストーリー 3
3. ストーリーが独立して完了し、統合

---

## 注記

- [P] タスク = 異なるファイル、依存関係なし
- [Story] ラベルは、追跡可能性のためにタスクを特定のユーザーストーリーにマッピング
- 各ユーザーストーリーは独立して完了可能でテスト可能であるべき
- 実装前にテストが失敗することを検証
- 各タスクまたは論理グループの後にコミット
- 任意のチェックポイントで停止してストーリーを独立して検証
- 回避: 曖昧なタスク、同じファイルの競合、独立性を壊すストーリー間依存
